<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create Profile Realtor Page</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/media.css" />
    <link rel="stylesheet" href="css/selects.css" />
  </head>
  <body>
    <main>
      <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
      </div>

      <section class="enter-page create-profile-realtor">
        <div class="container">
          <a href="index.html" class="cancel">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M18.3647 5.63567C18.7552 6.02619 18.7552 6.65936 18.3647 7.04988L13.4148 11.9998L18.3646 16.9495C18.7551 17.34 18.7551 17.9732 18.3646 18.3637C17.974 18.7543 17.3409 18.7543 16.9504 18.3637L12.0006 13.414L7.05099 18.3636C6.66047 18.7541 6.0273 18.7541 5.63678 18.3636C5.24625 17.9731 5.24625 17.3399 5.63678 16.9494L10.5864 11.9998L5.63664 7.05002C5.24612 6.6595 5.24612 6.02633 5.63664 5.63581C6.02717 5.24528 6.66033 5.24528 7.05086 5.63581L12.0006 10.5856L16.9505 5.63567C17.341 5.24514 17.9742 5.24514 18.3647 5.63567Z"
                fill="#2A344A"
              />
            </svg>
          </a>
          <div class="wrapper head">
            <h3>Настройте ваш профиль риелтора</h3>
            <div class="id-realtor">ID 10445</div>
          </div>
          <div class="wrapper">
            <h3>Фото для профиля <span>*</span></h3>
            <div class="subtitle">
              Загрузите минимум одно фото для профиля. Вес до 10 мб. Оптимальное
              разрешение 600 x 600px. Доступный формат jpg / png
            </div>
            <form class="form" action="">
              <div class="upload-container" data-multiple="false">
                <div class="preview"></div>
                <div class="up-info">
                  <div class="file-icon">
                    <img src="img/file-image.svg" alt="" />
                  </div>
                  <p>
                    Перетащите изображение сюда или
                    <a> загрузите с устройства</a>
                  </p>
                  <input type="file" accept="image/*" style="display: none" />
                </div>
              </div>
            </form>
          </div>
          <div class="button-primary">Далее</div>
          <div class="wrapper hide">
            <h3>Личные данные <span>*</span></h3>
            <div class="subtitle">
              Ваши личные данные будут доступны всем пользователям платформы
            </div>
            <form class="gap form" action="">
              <div class="row">
                <div class="input-container">
                  <input type="text" name="" id="" required />
                  <div class="placeholder">Имя <span>*</span></div>
                </div>
                <div class="input-container">
                  <input type="text" name="" id="" required />
                  <div class="placeholder">Фамилия <span>*</span></div>
                </div>
              </div>
              <div class="row">
                <div class="input-container">
                  <input type="text" name="" id="" required />
                  <div class="placeholder">Отчество</div>
                </div>
                <div class="select-container-single">
                  <select id="" name="" required>
                    <option value=""></option>
                    <option value="apple">Мужской</option>
                    <option value="banana">Женский</option>
                  </select>
                  <label for="">Пол <span>*</span></label>
                </div>
              </div>
              <div class="row">
                <div class="select-container-single">
                  <select id="" name="" required>
                    <option value=""></option>
                    <option value="apple">Москва</option>
                    <option value="banana">Санкт-Петербург</option>
                    <option value="banana">Тюмень</option>
                    <option value="banana">Сургут</option>
                  </select>
                  <label for="">Город <span>*</span></label>
                </div>
              </div>
            </form>
          </div>
          <div class="button-primary inactive">Далее</div>
          <div class="wrapper hide">
            <h3>Контакты <span>*</span></h3>
            <div class="subtitle">
              Все данные, кроме эл. почтывидны пользователям, которые откроют
              вам свои контакты
            </div>
            <form class="gap form" action="">
              <div class="row">
                <div class="input-container">
                  <input class="phone" type="text" name="" id="" required />
                  <div class="placeholder">Телефон <span>*</span></div>
                </div>
                <div class="input-container">
                  <input type="text" name="" id="" required />
                  <div class="placeholder">Эл. почта <span>*</span></div>
                </div>
              </div>
            </form>
            <h5>Мессенджеры</h5>
            <form class="gap form" action="">
              <div class="row">
                <div class="input-container">
                  <input type="text" name="" id="" required />
                  <div class="placeholder">WhatsApp</div>
                </div>
                <div class="input-container">
                  <input type="text" name="" id="" required />
                  <div class="placeholder">Telegram</div>
                </div>
              </div>
              <div class="row">
                <div class="input-container">
                  <input type="text" name="" id="" required />
                  <div class="placeholder">Viber</div>
                </div>
                <div class="input-container">
                  <input type="text" name="" id="" required />
                  <div class="placeholder">Zoom</div>
                </div>
              </div>
            </form>
          </div>
          <div class="button-primary inactive">Далее</div>
          <div class="wrapper hide">
            <h3>Параметры недвижимости <span>*</span></h3>
            <div class="subtitle">
              Укажите параметры недвижимости, которой сейчас занимаетесь.
              Система будет информировать вас о поступлении заявок
              с аналогичными данными
            </div>
            <form class="gap custom-selects" action="">
              <div class="row">
                <div class="custom-select-container">
                  <div class="select-wrapper">
                    <div class="select-placeholder">
                      Город недвижимости <span>*</span>
                    </div>
                    <div class="custom-select" onclick="toggleOptions(this)">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="18"
                        height="18"
                        viewBox="0 0 18 18"
                        fill="none"
                      >
                        <path
                          d="M4.5 7.75L8.64645 11.8964C8.84171 12.0917 9.15829 12.0917 9.35355 11.8964L13.5 7.75"
                          stroke="#7786A5"
                          stroke-width="1.5"
                          stroke-linecap="round"
                        />
                      </svg>
                    </div>
                    <div class="selected-items"></div>
                  </div>
                  <input
                    type="text"
                    class="search-input"
                    placeholder="Поиск..."
                    oninput="filterOptions(this)"
                  />
                  <div class="custom-options">
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 1" />
                      <label>Option 1</label>
                    </div>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 2" />
                      <label>Option 2</label>
                    </div>

                    <h4>Test</h4>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 3" />
                      <label>Option 3</label>
                    </div>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 4" />
                      <label>Option 4</label>
                    </div>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 5" />
                      <label>Option 5</label>
                    </div>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 6" />
                      <label>Option 6</label>
                    </div>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 7" />
                      <label>Option 7</label>
                    </div>
                    <div class="no-results">Нет результатов</div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="custom-select-container">
                  <div class="select-wrapper">
                    <div class="select-placeholder">
                      Формат сделки <span>*</span>
                    </div>
                    <div class="custom-select" onclick="toggleOptions(this)">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="18"
                        height="18"
                        viewBox="0 0 18 18"
                        fill="none"
                      >
                        <path
                          d="M4.5 7.75L8.64645 11.8964C8.84171 12.0917 9.15829 12.0917 9.35355 11.8964L13.5 7.75"
                          stroke="#7786A5"
                          stroke-width="1.5"
                          stroke-linecap="round"
                        />
                      </svg>
                    </div>
                    <div class="selected-items"></div>
                  </div>
                  <input
                    type="text"
                    class="search-input"
                    placeholder="Поиск..."
                    oninput="filterOptions(this)"
                  />
                  <div class="custom-options">
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 1" />
                      <label>Option 1</label>
                    </div>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 2" />
                      <label>Option 2</label>
                    </div>
                    <h4>Test</h4>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 3" />
                      <label>Option 3</label>
                    </div>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 4" />
                      <label>Option 4</label>
                    </div>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 5" />
                      <label>Option 5</label>
                    </div>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 6" />
                      <label>Option 6</label>
                    </div>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 7" />
                      <label>Option 7</label>
                    </div>
                    <div class="no-results">Нет результатов</div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="custom-select-container">
                  <div class="select-wrapper">
                    <div class="select-placeholder">
                      Тип недвижимости <span>*</span>
                    </div>
                    <div class="custom-select" onclick="toggleOptions(this)">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="18"
                        height="18"
                        viewBox="0 0 18 18"
                        fill="none"
                      >
                        <path
                          d="M4.5 7.75L8.64645 11.8964C8.84171 12.0917 9.15829 12.0917 9.35355 11.8964L13.5 7.75"
                          stroke="#7786A5"
                          stroke-width="1.5"
                          stroke-linecap="round"
                        />
                      </svg>
                    </div>
                    <div class="selected-items"></div>
                  </div>
                  <input
                    type="text"
                    class="search-input"
                    placeholder="Поиск..."
                    oninput="filterOptions(this)"
                  />
                  <div class="custom-options">
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 1" />
                      <label>Option 1</label>
                    </div>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 2" />
                      <label>Option 2</label>
                    </div>

                    <h4>Test</h4>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 3" />
                      <label>Option 3</label>
                    </div>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 4" />
                      <label>Option 4</label>
                    </div>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 5" />
                      <label>Option 5</label>
                    </div>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 6" />
                      <label>Option 6</label>
                    </div>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 7" />
                      <label>Option 7</label>
                    </div>
                    <div class="no-results">Нет результатов</div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="custom-select-container">
                  <div class="select-wrapper">
                    <div class="select-placeholder">
                      Состояние недвижимости <span>*</span>
                    </div>
                    <div class="custom-select" onclick="toggleOptions(this)">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="18"
                        height="18"
                        viewBox="0 0 18 18"
                        fill="none"
                      >
                        <path
                          d="M4.5 7.75L8.64645 11.8964C8.84171 12.0917 9.15829 12.0917 9.35355 11.8964L13.5 7.75"
                          stroke="#7786A5"
                          stroke-width="1.5"
                          stroke-linecap="round"
                        />
                      </svg>
                    </div>
                    <div class="selected-items"></div>
                  </div>
                  <input
                    type="text"
                    class="search-input"
                    placeholder="Поиск..."
                    oninput="filterOptions(this)"
                  />
                  <div class="custom-options">
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 1" />
                      <label>Option 1</label>
                    </div>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 2" />
                      <label>Option 2</label>
                    </div>
                    <h4>Test</h4>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 3" />
                      <label>Option 3</label>
                    </div>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 4" />
                      <label>Option 4</label>
                    </div>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 5" />
                      <label>Option 5</label>
                    </div>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 6" />
                      <label>Option 6</label>
                    </div>
                    <div class="custom-option">
                      <input type="checkbox" data-value="Option 7" />
                      <label>Option 7</label>
                    </div>
                    <div class="no-results">Нет результатов</div>
                  </div>
                </div>
              </div>
            </form>
          </div>
          <div class="button-primary inactive">Далее</div>
          <div class="wrapper hide">
            <h3>Лицензии и сертификаты</h3>
            <div class="subtitle">
              Можете загрузить до 20 изображений. Вес до 10 мб. Оптимальное
              разрешение 1080 x 1920px. Доступный формат jpg / png / pdf
            </div>
            <form class="form" action="">
              <div class="upload-container big" data-multiple="true">
                <div class="preview big"></div>
                <div class="up-info">
                  <div class="file-icon">
                    <img src="img/file-image.svg" alt="" />
                  </div>
                  <p>
                    Перетащите изображение сюда или
                    <a> загрузите с устройства</a>
                  </p>
                  <input
                    type="file"
                    accept="image/*"
                    multiple
                    style="display: none"
                  />
                </div>
              </div>
            </form>
          </div>
          <div class="button-primary inactive">Далее</div>
          <div class="wrapper hide">
            <h3>О себе</h3>
            <div class="subtitle">
              Напишите о себе и преимуществах работы с вами
            </div>
            <form class="form" action="">
              <div class="input-container w100">
                <textarea
                  id="myTextarea"
                  maxlength="500"
                  rows="10"
                  required
                ></textarea>
                <div class="placeholder">О себе</div>
                <div class="char-counter" id="charCounter">0/500</div>
              </div>
              <div id="videoFormsContainer" class="video-forms-container"></div>
              <div id="addVideoBtn" class="add-video-btn add-video">
                Добавить видео
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="18"
                  height="18"
                  viewBox="0 0 18 18"
                  fill="none"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M9 4.25C9.41421 4.25 9.75 4.58579 9.75 5V8.2501H13C13.4142 8.2501 13.75 8.58588 13.75 9.0001C13.75 9.41431 13.4142 9.7501 13 9.7501H9.75V13C9.75 13.4142 9.41421 13.75 9 13.75C8.58578 13.75 8.25 13.4142 8.25 13V9.7501H5C4.58579 9.7501 4.25 9.41431 4.25 9.0001C4.25 8.58588 4.58579 8.2501 5 8.2501H8.25V5C8.25 4.58579 8.58578 4.25 9 4.25Z"
                    fill="#4E6AF3"
                  />
                </svg>
              </div>
            </form>
          </div>

          <div class="button-primary hide">Создать профиль</div>
        </div>
      </section>
    </main>
    <div id="modal" class="modal" style="display: none">
      <div class="modal-content">
        <span class="close-button"
          ><svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M18.3647 5.63567C18.7552 6.02619 18.7552 6.65936 18.3647 7.04988L13.4148 11.9998L18.3646 16.9495C18.7551 17.34 18.7551 17.9732 18.3646 18.3637C17.974 18.7543 17.3409 18.7543 16.9504 18.3637L12.0006 13.414L7.05099 18.3636C6.66047 18.7541 6.0273 18.7541 5.63678 18.3636C5.24625 17.9731 5.24625 17.3399 5.63678 16.9494L10.5864 11.9998L5.63664 7.05002C5.24612 6.6595 5.24612 6.02633 5.63664 5.63581C6.02717 5.24528 6.66033 5.24528 7.05086 5.63581L12.0006 10.5856L16.9505 5.63567C17.341 5.24514 17.9742 5.24514 18.3647 5.63567Z"
              fill="#7786A5"
            /></svg
        ></span>
        <div id="modal-body"></div>
      </div>
      <script>
        document.body.addEventListener("click", function (event) {
          if (event.target.classList.contains("form-next")) {
            event.target.classList.add("hide");

            var modalContent = event.target.closest(".modal-content");

            var confirmElement = modalContent.querySelector(".confirm");

            if (confirmElement) {
              confirmElement.classList.add("active");
            }
          }
        });
      </script>
    </div>
    <!-- Подключение jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- Подключение Inputmask -->
    <script src="https://cdn.jsdelivr.net/npm/inputmask@5.0.8-beta.0/dist/inputmask.min.js"></script>
    <script src="js/script.js"></script>
    <script>
      //счетчик вводимых символов
      const textarea = document.getElementById("myTextarea");
      const charCounter = document.getElementById("charCounter");

      textarea.addEventListener("input", () => {
        const currentLength = textarea.value.length;
        charCounter.textContent = `${currentLength}/500`;
      });
    </script>
    <script>
      // прогресс бар
      let progress = 0;

      function move() {
        if (progress < 100) {
          progress += 10;
          const progressBar = document.getElementById("progressBar");
          progressBar.style.width = progress + "%";
        }
      }
    </script>
    <script>
      // кнопки Далее
      document.addEventListener("DOMContentLoaded", () => {
        const buttons = document.querySelectorAll(".button-primary");
        const lastButton = buttons[buttons.length - 1];
        const createProfileButton = document.querySelector(
          ".button-primary.hide"
        );
        let progress = 0;
        const progressBar = document.getElementById("progressBar");

        buttons.forEach((button, index) => {
          button.addEventListener("click", () => {
            // Скрыть текущую кнопку
            button.classList.add("hide");

            // Показать следующий блок wrapper
            const nextWrapper = button.nextElementSibling;
            if (nextWrapper && nextWrapper.classList.contains("wrapper")) {
              nextWrapper.classList.remove("hide");
            }

            // Показать следующую кнопку или кнопку "Создать профиль"
            if (index < buttons.length - 2) {
              buttons[index + 1].classList.remove("inactive");
            } else if (index === buttons.length - 2) {
              // Последняя кнопка "Далее" была нажата
              createProfileButton.classList.remove("hide");
            }

            // Обновление прогрессбара
            if (progress < 100) {
              progress += 20; // Увеличиваем прогресс на 20% за каждую кнопку
              progressBar.style.width = progress + "%";
            }
          });
        });
      });
    </script>
    <script>
      document.querySelectorAll(".upload-container").forEach((container) => {
        const fileInput = container.querySelector('input[type="file"]');
        const preview = container.querySelector(".preview");
        const multiple = container.getAttribute("data-multiple") === "true";

        container.addEventListener("click", () => {
          fileInput.click();
        });

        container.addEventListener("dragover", (event) => {
          event.preventDefault();
          container.classList.add("dragover");
        });

        container.addEventListener("dragleave", () => {
          container.classList.remove("dragover");
        });

        container.addEventListener("drop", (event) => {
          event.preventDefault();
          container.classList.remove("dragover");

          const files = event.dataTransfer.files;
          if (files.length) {
            handleFiles(files, preview, multiple, container);
          }
        });

        fileInput.addEventListener("change", (event) => {
          handleFiles(event.target.files, preview, multiple, container);
        });
      });

      function handleFiles(files, preview, multiple, container) {
        if (!multiple) {
          preview.innerHTML = "";
        }

        Array.from(files).forEach((file) => {
          if (file && file.type.startsWith("image/")) {
            const reader = new FileReader();
            reader.onload = (event) => {
              // Создаем wrapper для каждого изображения
              const previewWrapper = document.createElement("div");
              previewWrapper.classList.add("preview-wrapper");

              const img = document.createElement("img");
              img.src = event.target.result;

              // Создаем кнопку для удаления
              const removeBtn = document.createElement("button");
              removeBtn.classList.add("remove-btn");
              //removeBtn.textContent = "×";
              removeBtn.addEventListener("click", (e) => {
                e.stopPropagation(); // Останавливаем всплытие события
                e.preventDefault(); // Останавливаем действие по умолчанию
                preview.removeChild(previewWrapper);
              });

              // Добавляем изображение и кнопку в preview-wrapper
              previewWrapper.appendChild(img);
              previewWrapper.appendChild(removeBtn);

              // Добавляем preview-wrapper в общий контейнер preview
              preview.appendChild(previewWrapper);

              container.classList.add("full");
            };
            reader.readAsDataURL(file);
          } else {
            alert("Please upload an image file.");
          }
        });
      }
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const maxForms = 3;
        const videoFormsContainer = document.getElementById(
          "videoFormsContainer"
        );
        const addVideoBtn = document.getElementById("addVideoBtn");

        addVideoBtn.addEventListener("click", () => {
          if (videoFormsContainer.children.length < maxForms) {
            const videoForm = document.createElement("div");
            videoForm.classList.add("video-form");

            const videoNameInput = document.createElement("input");
            videoNameInput.type = "text";
            videoNameInput.placeholder = "Название видео";

            const videoLinkInput = document.createElement("input");
            videoLinkInput.type = "text";
            videoLinkInput.placeholder = "Ссылка на видео";

            const removeBtn = document.createElement("button");
            removeBtn.classList.add("remove-btn");
            removeBtn.textContent = "×";
            removeBtn.addEventListener("click", () => {
              videoFormsContainer.removeChild(videoForm);
              if (videoFormsContainer.children.length < maxForms) {
                addVideoBtn.classList.remove("off"); // Убираем класс off, если форма удалена и лимит не достигнут
              }
            });

            videoForm.appendChild(videoNameInput);
            videoForm.appendChild(videoLinkInput);
            videoForm.appendChild(removeBtn);

            videoFormsContainer.appendChild(videoForm);

            if (videoFormsContainer.children.length === maxForms) {
              addVideoBtn.classList.add("off"); // Добавляем класс off, если достигнут лимит форм
            }
          }
        });
      });
    </script>
    <script>
      document.querySelectorAll(".multi-select").forEach((multiSelect) => {
        const select = multiSelect.querySelector("select");
        const selectedItems = multiSelect.querySelector(".selected-items");

        select.addEventListener("change", () => {
          const selectedValue = select.value;
          const selectedText = select.options[select.selectedIndex].text;

          // Проверка, что элемент уже не добавлен
          if (
            [...selectedItems.children].some(
              (li) => li.dataset.value === selectedValue
            )
          ) {
            alert("Этот пункт уже добавлен.");
            return;
          }

          // Создаем элемент списка
          const li = document.createElement("li");
          li.dataset.value = selectedValue;
          li.textContent = selectedText;

          // Создаем кнопку для удаления
          const removeBtn = document.createElement("span");
          removeBtn.textContent = " ×";
          removeBtn.addEventListener("click", () => {
            selectedItems.removeChild(li);
            updateSelectClass(select, selectedItems);
            // Показать опцию снова в селекте
            const option = select.querySelector(
              `option[value="${selectedValue}"]`
            );
            if (option) option.classList.remove("hidden");
          });

          li.appendChild(removeBtn);
          selectedItems.appendChild(li);

          // Скрываем выбранную опцию
          const option = select.querySelector(
            `option[value="${selectedValue}"]`
          );
          if (option) option.classList.add("hidden");

          // Обновляем класс select и сбрасываем выбор
          updateSelectClass(select, selectedItems);
          select.value = "";
        });

        // Функция обновления класса select
        function updateSelectClass(select, selectedItems) {
          if (selectedItems.children.length > 0) {
            select.classList.add("full");
          } else {
            select.classList.remove("full");
          }
        }
      });
    </script>
    <script>
      document.addEventListener("click", function (event) {
        document.querySelectorAll(".custom-options").forEach((options) => {
          if (!options.parentElement.contains(event.target)) {
            options.classList.remove("open");
            const container = options.closest(".custom-select-container");
            const placeholder = container.querySelector(".select-placeholder");
            const searchInput = container.querySelector(".search-input");
            container.classList.remove("active");
            if (placeholder) placeholder.classList.remove("active");
            if (searchInput) searchInput.classList.remove("active");
          }
        });
      });

      function toggleOptions(element) {
        const container = element.closest(".custom-select-container");
        const options = container.querySelector(".custom-options");
        const placeholder = container.querySelector(".select-placeholder");
        const searchInput = container.querySelector(".search-input");

        const isOpen = options.classList.toggle("open");
        container.classList.toggle("active", isOpen);

        if (placeholder) {
          placeholder.classList.toggle("active", isOpen);
        }
        if (searchInput) {
          searchInput.classList.toggle("active", isOpen);
        }
      }

      function filterOptions(inputElement) {
        const input = inputElement.value.toLowerCase();
        const container = inputElement.closest(".custom-select-container");
        const options = container.querySelectorAll(".custom-option");
        const headings = container.querySelectorAll("h4");
        let hasMatch = false;

        options.forEach((option) => {
          const label = option.querySelector("label").textContent.toLowerCase();
          if (label.includes(input)) {
            option.style.display = "block";
            hasMatch = true;
          } else {
            option.style.display = "none";
          }
        });

        headings.forEach((heading) => {
          let nextElement = heading.nextElementSibling;
          let allHidden = true;

          while (
            nextElement &&
            nextElement.classList.contains("custom-option")
          ) {
            if (nextElement.style.display !== "none") {
              allHidden = false;
              break;
            }
            nextElement = nextElement.nextElementSibling;
          }

          heading.style.display = allHidden ? "none" : "block";
        });

        container.querySelector(".no-results").style.display = hasMatch
          ? "none"
          : "block";
      }

      // Обработчик клика на custom-option для переключения чекбоксов
      document.querySelectorAll(".custom-option").forEach((option) => {
        option.addEventListener("click", function () {
          const checkbox = option.querySelector("input[type='checkbox']");
          checkbox.checked = !checkbox.checked;
          checkbox.dispatchEvent(new Event("change"));
        });
      });

      document.querySelectorAll(".custom-option input").forEach((checkbox) => {
        checkbox.addEventListener("change", () => {
          const selectedItems = checkbox
            .closest(".custom-select-container")
            .querySelector(".selected-items");
          const value = checkbox.dataset.value;

          if (checkbox.checked) {
            if (
              !selectedItems.querySelector(
                `.selected-item span[data-value="${value}"]`
              )
            ) {
              const item = document.createElement("div");
              item.classList.add("selected-item");
              item.innerHTML = `<span data-value="${value}">${value}</span><span class="remove-item" onclick="removeItem(this)"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.3034 3.69867C12.5963 3.99157 12.5963 4.46644 12.3034 4.75933L9.06236 8.00033L12.3033 11.2412C12.5962 11.5341 12.5962 12.009 12.3033 12.3019C12.0104 12.5948 11.5355 12.5948 11.2426 12.3019L8.0017 9.06099L4.76089 12.3018C4.46799 12.5947 3.99312 12.5947 3.70023 12.3018C3.40733 12.0089 3.40733 11.534 3.70023 11.2411L6.94104 8.00033L3.70014 4.75943C3.40725 4.46653 3.40725 3.99166 3.70014 3.69877C3.99303 3.40587 4.46791 3.40587 4.7608 3.69877L8.0017 6.93967L11.2427 3.69867C11.5356 3.40578 12.0105 3.40578 12.3034 3.69867Z" fill="#7786A5"/>
</svg></span>`;
              selectedItems.appendChild(item);
            }
          } else {
            selectedItems
              .querySelector(`.selected-item span[data-value="${value}"]`)
              .parentElement.remove();
          }
        });
      });

      function removeItem(element) {
        const value = element.previousElementSibling.getAttribute("data-value");
        const checkbox = document.querySelector(
          `.custom-option input[data-value="${value}"]`
        );
        checkbox.checked = false;
        checkbox.dispatchEvent(new Event("change")); // Вызов события change
        element.parentElement.remove();
      }
    </script>
  </body>
</html>
